{% extends "base.html" %}
{% block content %}
<div class="container">
  <h2>질병명 검색</h2>

  <!-- 검색 폼 -->
  <form method="get" action="{% url 'search' %}" class="search-form">
    <input type="text" name="q" placeholder="예시: 당뇨, 용종, 골절 등" value="{{ query }}">
    <button type="submit">검색</button>
  </form>

  <!-- 검색 결과 -->
  {% if query %}
    <h3>"{{ query }}" 검색 결과</h3>
      {% if results %}
        {% for d in results %}
        <div class="disease-card">
          <h3>{{ d.name }}</h3>
          <p><b>인수기준:</b> {{ d.acceptance }}</p>
          <p><b>시그니처355:</b> {{ d.signature355 }}</p>
      
          <table border="1" cellpadding="5">
            <thead>
              <tr>
                <th>치료일수</th>
                <th>수술여부</th>
                <th>재발여부</th>
              </tr>
            </thead>
            <tbody>
              <tr>
                <td>{{ d.treatmentDays }}</td>
                <td>{{ d.surgery }}</td>
                <td>{{ d.recurrence }}</td>
              </tr>
            </tbody>
          </table>
      
          {% if d.restrictions %}
            <p><b>제한사항:</b> {{ d.restrictions }}</p>
          {% endif %}
        </div>
        {% endfor %}
      {% else %}
        <p>검색 결과가 없습니다.</p>
    {% endif %}
  {% endif %}

  <div class="meta">
    총 {{ results|length }} 건
  </div>
</div>
{% endblock %}
